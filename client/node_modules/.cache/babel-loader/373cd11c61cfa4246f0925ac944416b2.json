{"ast":null,"code":"var _jsxFileName = \"/home/akash/antstack/client/src/App.js\";\nimport React, { Component } from 'react';\nimport ReactSearchBox from 'react-search-box';\nimport axios from 'axios';\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getData = async () => {\n      const result = await axios.get('http://localhost:5000');\n      let formatData = result.data.map((row, index) => {\n        return {\n          key: `${index + 1}`,\n          value: row.name\n        };\n      });\n      this.setState({\n        data: formatData\n      });\n      console.log(\"mounted\", formatData);\n    };\n\n    this.state = {\n      cartAmount: 0,\n      data: [],\n      valueAfterDiscount: 0\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        padding: '50px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ReactSearchBox, {\n      placeholder: \"Search for coupon\",\n      data: this.state.data,\n      onSelect: async record => {\n        console.log(record.value, this.state.cartAmount);\n        const discount = await axios.post('http://localhost:5000/coupon', {\n          cartAmount: 800,\n          couponCode: record.value\n        });\n        console.log(\"discount\", discount.data);\n        this.setState({ ...this.state,\n          valueAfterDiscount: discount.data.valueAfterFlat\n        });\n      },\n      onFocus: async () => {\n        console.log('This function is called when is focussed');\n        await this.getData();\n      },\n      onChange: value => console.log(value),\n      fuseConfigs: {\n        threshold: 0.05\n      },\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        textAlign: 'center',\n        width: '50%',\n        margin: '0 auto',\n        flexDirection: 'row',\n        display: 'flex',\n        justifyContent: 'space-evenly'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"minus\",\n      onClick: e => {\n        e.preventDefault();\n        if (!this.state.cartAmount <= 0) this.setState({\n          cartAmount: this.state.cartAmount - 50\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 1\n      }\n    }, \"--\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"plus\",\n      onClick: e => {\n        e.preventDefault();\n        this.setState({\n          cartAmount: this.state.cartAmount + 50\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 3\n      }\n    }, \" +\"), \"valueAfterDiscount = \", this.state.valueAfterDiscount ? this.state.valueAfterDiscount : this.state.cartAmount, \"cartAmount = \", this.state.cartAmount));\n  }\n\n}","map":{"version":3,"sources":["/home/akash/antstack/client/src/App.js"],"names":["React","Component","ReactSearchBox","axios","App","constructor","props","getData","result","get","formatData","data","map","row","index","key","value","name","setState","console","log","state","cartAmount","valueAfterDiscount","render","padding","record","discount","post","couponCode","valueAfterFlat","threshold","textAlign","width","margin","flexDirection","display","justifyContent","e","preventDefault"],"mappings":"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","sourcesContent":["\n  import React, { Component } from 'react'\n  import ReactSearchBox from 'react-search-box'\n  import axios from 'axios'\n\n  export default class App extends Component {\n    constructor(props){\n      super(props)\n      this.state ={\n        cartAmount:0,\n        data:[],\nvalueAfterDiscount:0\n      }\n    }\n    getData= async ()=>{\n      const result = await axios.get('http://localhost:5000')\n      let formatData = result.data.map((row,index)=>{\n      return {\n        key:`${index+1}`,\n        value:row.name\n      }\n    })\n    this.setState({data:formatData})\n    console.log(\"mounted\", formatData);\n      }\n\n    render() {\n      return (\n        <div style={{padding:'50px'}}>\n          \n          <ReactSearchBox\n            placeholder=\"Search for coupon\"\n            data={this.state.data}\n            onSelect={async (record) => {\n              console.log(record.value, this.state.cartAmount)\n              const discount = await axios.post('http://localhost:5000/coupon',{cartAmount:800, couponCode:record.value})\n              console.log(\"discount\", discount.data);\n              this.setState({...this.state,valueAfterDiscount:discount.data.valueAfterFlat})\n            }}\n            onFocus={ async () => {\n              console.log('This function is called when is focussed')\n           await this.getData()\n            }}\n            onChange={value => console.log(value)}\n            fuseConfigs={{\n              threshold: 0.05,\n            }}\n            value=\"\"\n          />\n\n<div style={{textAlign:'center', width:'50%', margin:'0 auto', flexDirection:'row', display:'flex', justifyContent:'space-evenly'}}>\n\n<button className=\"minus\" onClick={(e)=>{\n  e.preventDefault()\n  if(!this.state.cartAmount <=0)\n  this.setState({\n    cartAmount:this.state.cartAmount-50\n  })\n}}>--</button>\n  <button className=\"plus\" onClick={(e)=>{\n  e.preventDefault()\n  this.setState({\n    cartAmount:this.state.cartAmount+50\n  })\n}}> +</button>\nvalueAfterDiscount = {this.state.valueAfterDiscount?this.state.valueAfterDiscount:this.state.cartAmount}\ncartAmount = {this.state.cartAmount}\n</div>\n\n       </div>\n      )\n    }\n  }"]},"metadata":{},"sourceType":"module"}